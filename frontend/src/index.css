import { useState } from "react";
import Page from "./Page";

function App() {
  const [pages, setPages] = useState([
    { chapter: 1, title: "", image: null, caption: "", memo: "" },
  ]);

  const handlePageChange = (index, field, value) => {
    const updatedPages = [...pages];
    updatedPages[index][field] = value;
    setPages(updatedPages);
  };

  const addPage = () => {
    setPages([
      ...pages,
      { chapter: pages.length + 1, title: "", image: null, caption: "", memo: "" },
    ]);
  };

  const sortedPages = [...pages].sort((a, b) => a.chapter - b.chapter);

  return (
    <div>
      <h1>ğŸ“– ë”ì› - ì±… ë§Œë“¤ê¸° í”„ë¡œì íŠ¸</h1>
      {sortedPages.map((page, idx) => (
        <Page
          key={idx}
          data={page}
          onChange={(field, value) => handlePageChange(idx, field, value)}
        />
      ))}
      <button onClick={addPage}>ğŸ“„ ìƒˆ í˜ì´ì§€ ì¶”ê°€</button>
    </div>
  );
}

export default App;
